<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.

// Door controls and reports
urgent chan dOpen[3], dClose[3];
urgent chan dOpened[3], dClosed[3];

// Lamp controls
urgent chan lOn, lOff;

// FallOff indicator controls
urgent chan fallOff, lostfive;
// And instruct the system to crash if nessecary
urgent chan crash;

// Conveyor Belt controls
urgent chan bStart, bStop;
urgent chan bfbForward, bfbBack, bfbStop;

// Button reports
urgent chan emStart, emStop;
chan startPress;

// Sensor reports
urgent chan sSense[5], sNoSense[5];

// Channels for calling and returning of routines
urgent chan MoveBackwardTCall, MoveBackwardTRet;
urgent chan MoveForwardTCall, MoveForwardTRet;
urgent chan MoveBackwardS1Call, MoveBackwardS1True, MoveBackwardS1False;
urgent chan MoveForwardS1Call, MoveForwardS1True, MoveForwardS1False;
urgent chan MoveBackwardS2Call, MoveBackwardS2True, MoveBackwardS2False;
urgent chan MoveForwardS2Call, MoveForwardS2True, MoveForwardS2False;
urgent chan LoadWaferCall, LoadWaferTrue, LoadWaferFalse;
urgent chan OpenDoor1Call, OpenDoor1True, OpenDoor1False;
urgent chan OpenDoor2Call, OpenDoor2True, OpenDoor2False;
urgent chan CloseDoor1Call, CloseDoor1True, CloseDoor1False;
urgent chan CloseDoor2Call, CloseDoor2True, CloseDoor2False;
urgent chan BurnCall, BurnTrue, BurnFalse;
urgent chan HandleFalloffCall, HandleFalloffRet;

// Variables for passing arguments to routines
typedef int[0,255] byte;
byte arg[8];</declaration><template><name>Lamp</name><location id="id0" x="-152" y="-64"><name x="-162" y="-94">Off</name></location><location id="id1" x="-8" y="-64"><name x="-18" y="-94">On</name></location><init ref="id0"/><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="-88" y="-56">lOff?</label><nail x="-80" y="-56"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="synchronisation" x="-88" y="-96">lOn?</label><nail x="-80" y="-72"/></transition></template><template><name>Sensor</name><parameter>const int[1,4] sid</parameter><declaration>clock cl;</declaration><location id="id2" x="-64" y="-40"><name x="-80" y="-24">sense</name></location><location id="id3" x="-168" y="-40"><name x="-192" y="-24">noSense</name></location><init ref="id3"/><transition><source ref="id2"/><target ref="id2"/><label kind="synchronisation" x="-8" y="-56">sSense[sid]!</label><nail x="-16" y="-16"/><nail x="-16" y="-64"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="synchronisation" x="-320" y="-48">sNoSense[sid]!</label><nail x="-224" y="-16"/><nail x="-224" y="-64"/></transition><transition><source ref="id2"/><target ref="id3"/><label kind="synchronisation" x="-160" y="-8">sNoSense[sid]!</label><nail x="-120" y="-24"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="-152" y="-72">sSense[sid]!</label><nail x="-120" y="-56"/></transition></template><template><name>Conveyor</name><location id="id4" x="-16" y="-32"><name x="-40" y="-16">Running</name></location><location id="id5" x="-160" y="-32"><name x="-176" y="-16">Stopped</name></location><init ref="id5"/><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="32" y="-48">bStart?</label><nail x="32" y="-72"/><nail x="32" y="0"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="synchronisation" x="-256" y="-48">bStop?</label><nail x="-208" y="-72"/><nail x="-208" y="0"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="synchronisation" x="-112" y="-64">bStop?</label><nail x="-88" y="-48"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-112" y="-24">bStart?</label><nail x="-88" y="-24"/></transition></template><template><name>ConveyorBF</name><location id="id6" x="120" y="-88"><name x="110" y="-118">Forward</name></location><location id="id7" x="-200" y="-88"><name x="-210" y="-118">Back</name></location><location id="id8" x="-40" y="-88"><name x="-104" y="-96">Stopped</name></location><init ref="id8"/><transition><source ref="id8"/><target ref="id8"/><label kind="synchronisation" x="-64" y="-48">bfbStop?</label><nail x="-16" y="-48"/><nail x="-64" y="-48"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="synchronisation" x="160" y="-96">bfbForward?</label><nail x="160" y="-112"/><nail x="160" y="-64"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="synchronisation" x="-304" y="-96">bfbBack?</label><nail x="-240" y="-112"/><nail x="-240" y="-64"/></transition><transition><source ref="id6"/><target ref="id8"/><label kind="synchronisation" x="16" y="-56">bfbStop?</label><nail x="40" y="-56"/></transition><transition><source ref="id8"/><target ref="id6"/><label kind="synchronisation" x="0" y="-104">bfbForward?</label><nail x="40" y="-120"/></transition><transition><source ref="id7"/><target ref="id8"/><label kind="synchronisation" x="-152" y="-56">bfbStop?</label><nail x="-120" y="-56"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-152" y="-112">bfbBack?</label><nail x="-120" y="-120"/></transition></template><template><name x="5" y="5">Door</name><parameter>const int[1,2] did</parameter><declaration>// Place local declarations here.
clock dcl;</declaration><location id="id9" x="128" y="-16"><name x="118" y="-46">PseudoOpening</name></location><location id="id10" x="-288" y="-160"><name x="-344" y="-152">PseudoClosing</name></location><location id="id11" x="0" y="-88"></location><location id="id12" x="-168" y="-88"></location><location id="id13" x="-168" y="-16"><name x="-232" y="-24">Closing</name><label kind="invariant" x="-208" y="-8">dcl &lt;= 1</label></location><location id="id14" x="0" y="-16"><name x="-16" y="-8">Open</name></location><location id="id15" x="0" y="-160"><name x="16" y="-168">Opening</name><label kind="invariant" x="-8" y="-192">dcl &lt;= 1</label></location><location id="id16" x="-168" y="-160"><name x="-184" y="-192">Closed</name></location><init ref="id16"/><transition><source ref="id9"/><target ref="id14"/><label kind="synchronisation" x="24" y="0">dOpened[did]!</label><nail x="64" y="8"/></transition><transition><source ref="id14"/><target ref="id9"/><label kind="synchronisation" x="24" y="-32">dOpen[did]?</label></transition><transition><source ref="id10"/><target ref="id16"/><label kind="synchronisation" x="-272" y="-200">dClosed[did]!</label><nail x="-232" y="-184"/></transition><transition><source ref="id16"/><target ref="id10"/><label kind="synchronisation" x="-272" y="-160">dClose[did]?</label></transition><transition><source ref="id11"/><target ref="id14"/><label kind="synchronisation" x="8" y="-72">dOpened[did]!</label></transition><transition><source ref="id15"/><target ref="id11"/><label kind="guard" x="8" y="-144">dcl &gt;= 1</label></transition><transition><source ref="id12"/><target ref="id16"/><label kind="synchronisation" x="-256" y="-128">dClosed[did]!</label></transition><transition><source ref="id13"/><target ref="id12"/><label kind="guard" x="-224" y="-64">dcl &gt;= 1</label></transition><transition><source ref="id14"/><target ref="id13"/><label kind="synchronisation" x="-120" y="-16">dClose[did]?</label><label kind="assignment" x="-112" y="-40">dcl = 0</label></transition><transition><source ref="id16"/><target ref="id15"/><label kind="synchronisation" x="-120" y="-184">dOpen[did]?</label><label kind="assignment" x="-104" y="-160">dcl = 0</label></transition></template><template><name>FallOff</name><location id="id17" x="64" y="-176"><name x="40" y="-208">lost5</name><committed/></location><location id="id18" x="-32" y="-176"><name x="-42" y="-206">lost4</name></location><location id="id19" x="-128" y="-176"><name x="-138" y="-206">lost3</name></location><location id="id20" x="-224" y="-176"><name x="-234" y="-206">lost2</name></location><location id="id21" x="-320" y="-176"><name x="-328" y="-208">lost1</name></location><location id="id22" x="-416" y="-176"><name x="-424" y="-208">lost0</name></location><init ref="id22"/><transition><source ref="id17"/><target ref="id17"/><label kind="synchronisation" x="104" y="-184">lostfive!</label><nail x="104" y="-208"/><nail x="104" y="-144"/></transition><transition><source ref="id18"/><target ref="id17"/><label kind="synchronisation" x="-8" y="-192">fallOff?</label></transition><transition><source ref="id19"/><target ref="id18"/><label kind="synchronisation" x="-104" y="-192">fallOff?</label></transition><transition><source ref="id20"/><target ref="id19"/><label kind="synchronisation" x="-200" y="-192">fallOff?</label></transition><transition><source ref="id21"/><target ref="id20"/><label kind="synchronisation" x="-296" y="-192">fallOff?</label></transition><transition><source ref="id22"/><target ref="id21"/><label kind="synchronisation" x="-392" y="-192">fallOff?</label></transition></template><template><name>MoveBackwardT</name><declaration>clock cl;
</declaration><location id="id23" x="-168" y="-352"></location><location id="id24" x="-120" y="-416"></location><location id="id25" x="-72" y="-352"></location><location id="id26" x="0" y="-208"></location><location id="id27" x="0" y="-296"></location><location id="id28" x="-120" y="-296"><name x="-144" y="-272">Moving</name><label kind="invariant" x="-144" y="-288">cl &lt;= arg[0]</label></location><location id="id29" x="-248" y="-296"></location><location id="id30" x="-416" y="-296"></location><init ref="id30"/><transition><source ref="id23"/><target ref="id28"/><label kind="synchronisation" x="-208" y="-344">bfbBack!</label><label kind="assignment" x="-216" y="-336">cl = arg[0]</label></transition><transition><source ref="id24"/><target ref="id23"/><label kind="synchronisation" x="-200" y="-400">emStop?</label></transition><transition><source ref="id25"/><target ref="id24"/><label kind="synchronisation" x="-88" y="-400">bfbStop!</label></transition><transition><source ref="id28"/><target ref="id25"/><label kind="synchronisation" x="-80" y="-344">emStart?</label></transition><transition><source ref="id26"/><target ref="id30"/><label kind="synchronisation" x="-272" y="-224">MoveBackwardTRet!</label><nail x="-416" y="-208"/></transition><transition><source ref="id27"/><target ref="id26"/><label kind="synchronisation" x="0" y="-264">bfbStop!</label></transition><transition><source ref="id28"/><target ref="id27"/><label kind="guard" x="-96" y="-312">cl &gt;= arg[0]</label></transition><transition><source ref="id29"/><target ref="id28"/><label kind="synchronisation" x="-224" y="-312">bfbBack!</label><label kind="assignment" x="-208" y="-296">cl = 0</label></transition><transition><source ref="id30"/><target ref="id29"/><label kind="synchronisation" x="-400" y="-312">MoveBackwardTCall?</label></transition></template><template><name>MoveForwardT</name><declaration>clock cl;</declaration><location id="id31" x="-160" y="-352"></location><location id="id32" x="-120" y="-408"></location><location id="id33" x="-80" y="-352"></location><location id="id34" x="0" y="-208"></location><location id="id35" x="0" y="-296"></location><location id="id36" x="-120" y="-296"><name x="-144" y="-272">Moving</name><label kind="invariant" x="-144" y="-288">cl &lt;= arg[0]</label></location><location id="id37" x="-248" y="-296"></location><location id="id38" x="-416" y="-296"></location><init ref="id38"/><transition><source ref="id31"/><target ref="id36"/><label kind="synchronisation" x="-224" y="-344">bfbForward!</label><label kind="assignment" x="-208" y="-336">cl = arg[0]</label></transition><transition><source ref="id32"/><target ref="id31"/><label kind="synchronisation" x="-200" y="-395">emStop?</label></transition><transition><source ref="id33"/><target ref="id32"/><label kind="synchronisation" x="-96" y="-392">bfbStop!</label></transition><transition><source ref="id36"/><target ref="id33"/><label kind="synchronisation" x="-88" y="-336">emStart?</label></transition><transition><source ref="id34"/><target ref="id38"/><label kind="synchronisation" x="-272" y="-224">MoveForwardTRet!</label><nail x="-416" y="-208"/></transition><transition><source ref="id35"/><target ref="id34"/><label kind="synchronisation" x="0" y="-264">bfbStop!</label></transition><transition><source ref="id36"/><target ref="id35"/><label kind="guard" x="-96" y="-312">cl &gt;= arg[0]</label></transition><transition><source ref="id37"/><target ref="id36"/><label kind="synchronisation" x="-224" y="-312">bfbForward!</label><label kind="assignment" x="-208" y="-296">cl = 0</label></transition><transition><source ref="id38"/><target ref="id37"/><label kind="synchronisation" x="-392" y="-312">MoveForwardTCall?</label></transition></template><template><name>MoveBackwardS2</name><declaration>clock cl;</declaration><location id="id39" x="16" y="-304"></location><location id="id40" x="72" y="-256"></location><location id="id41" x="16" y="-216"></location><location id="id42" x="-232" y="-320"></location><location id="id43" x="-232" y="-192"></location><location id="id44" x="-88" y="-192"></location><location id="id45" x="-88" y="-320"></location><location id="id46" x="-88" y="-256"><name x="-144" y="-288">Moving</name><label kind="invariant" x="-136" y="-248">cl &lt;= 5</label></location><location id="id47" x="-232" y="-256"></location><location id="id48" x="-400" y="-256"></location><init ref="id48"/><transition><source ref="id39"/><target ref="id46"/><label kind="synchronisation" x="-64" y="-272">bfbBack!</label><label kind="assignment" x="-32" y="-288">cl = 0</label></transition><transition><source ref="id40"/><target ref="id39"/><label kind="synchronisation" x="48" y="-296">emStop?</label></transition><transition><source ref="id41"/><target ref="id40"/><label kind="synchronisation" x="40" y="-240">bfbStop!</label></transition><transition><source ref="id46"/><target ref="id41"/><label kind="synchronisation" x="-40" y="-248">emStart?</label></transition><transition><source ref="id42"/><target ref="id48"/><label kind="synchronisation" x="-392" y="-336">MoveBackwardS2True!</label><nail x="-400" y="-320"/></transition><transition><source ref="id45"/><target ref="id42"/><label kind="synchronisation" x="-176" y="-336">bfbStop!</label></transition><transition><source ref="id43"/><target ref="id48"/><label kind="synchronisation" x="-392" y="-208">MoveBackwardS2False!</label><nail x="-400" y="-192"/></transition><transition><source ref="id44"/><target ref="id43"/><label kind="synchronisation" x="-176" y="-208">bfbStop!</label></transition><transition><source ref="id46"/><target ref="id44"/><label kind="guard" x="-80" y="-224">cl &gt;= 5</label></transition><transition><source ref="id46"/><target ref="id45"/><label kind="synchronisation" x="-80" y="-312">sSense[2]?</label></transition><transition><source ref="id47"/><target ref="id46"/><label kind="synchronisation" x="-200" y="-272">bfbBack!</label><label kind="assignment" x="-192" y="-256">cl = 0</label></transition><transition><source ref="id48"/><target ref="id47"/><label kind="synchronisation" x="-392" y="-272">MoveBackwardS2Call?</label></transition></template><template><name>MoveForwardS2</name><declaration>clock cl;</declaration><location id="id49" x="16" y="-304"></location><location id="id50" x="72" y="-264"></location><location id="id51" x="16" y="-216"></location><location id="id52" x="-232" y="-320"></location><location id="id53" x="-232" y="-192"></location><location id="id54" x="-88" y="-192"></location><location id="id55" x="-88" y="-320"></location><location id="id56" x="-88" y="-256"><name x="-136" y="-288">Moving</name><label kind="invariant" x="-136" y="-248">cl &lt;= 5</label></location><location id="id57" x="-232" y="-256"></location><location id="id58" x="-400" y="-256"></location><init ref="id58"/><transition><source ref="id49"/><target ref="id56"/><label kind="synchronisation" x="-64" y="-272">bfbForward!</label><label kind="assignment" x="-32" y="-288">cl = 0</label></transition><transition><source ref="id50"/><target ref="id49"/><label kind="synchronisation" x="40" y="-296">emStop?</label></transition><transition><source ref="id51"/><target ref="id50"/><label kind="synchronisation" x="40" y="-240">bfbStop!</label></transition><transition><source ref="id56"/><target ref="id51"/><label kind="synchronisation" x="-40" y="-248">emStart?</label></transition><transition><source ref="id52"/><target ref="id58"/><label kind="synchronisation" x="-392" y="-336">MoveForwardS2True!</label><nail x="-400" y="-320"/></transition><transition><source ref="id55"/><target ref="id52"/><label kind="synchronisation" x="-176" y="-336">bfbStop!</label></transition><transition><source ref="id53"/><target ref="id58"/><label kind="synchronisation" x="-392" y="-208">MoveForwardS2False!</label><nail x="-400" y="-192"/></transition><transition><source ref="id54"/><target ref="id53"/><label kind="synchronisation" x="-176" y="-208">bfbStop!</label></transition><transition><source ref="id56"/><target ref="id54"/><label kind="guard" x="-80" y="-216">cl &gt;= 5</label></transition><transition><source ref="id56"/><target ref="id55"/><label kind="synchronisation" x="-80" y="-312">sSense[2]?</label></transition><transition><source ref="id57"/><target ref="id56"/><label kind="synchronisation" x="-208" y="-272">bfbForward!</label><label kind="assignment" x="-192" y="-256">cl = 0</label></transition><transition><source ref="id58"/><target ref="id57"/><label kind="synchronisation" x="-384" y="-272">MoveForwardS2Call?</label></transition></template><template><name>MoveBackwardS1</name><declaration>clock cl;</declaration><location id="id59" x="-8" y="-296"></location><location id="id60" x="48" y="-256"></location><location id="id61" x="-16" y="-216"></location><location id="id62" x="-232" y="-320"></location><location id="id63" x="-232" y="-192"></location><location id="id64" x="-88" y="-192"></location><location id="id65" x="-88" y="-320"></location><location id="id66" x="-88" y="-256"><name x="-136" y="-288">Moving</name><label kind="invariant" x="-136" y="-248">cl &lt;= 5</label></location><location id="id67" x="-232" y="-256"></location><location id="id68" x="-400" y="-256"></location><init ref="id68"/><transition><source ref="id59"/><target ref="id66"/><label kind="synchronisation" x="-64" y="-272">bfbBack!</label><label kind="assignment" x="-40" y="-288">cl = 0</label></transition><transition><source ref="id60"/><target ref="id59"/><label kind="synchronisation" x="16" y="-296">emStop?</label></transition><transition><source ref="id61"/><target ref="id60"/><label kind="synchronisation" x="16" y="-240">bfbStop!</label></transition><transition><source ref="id66"/><target ref="id61"/><label kind="synchronisation" x="-56" y="-256">emStart?</label></transition><transition><source ref="id62"/><target ref="id68"/><label kind="synchronisation" x="-392" y="-336">MoveBackwardS1True!</label><nail x="-400" y="-320"/></transition><transition><source ref="id65"/><target ref="id62"/><label kind="synchronisation" x="-176" y="-336">bfbStop!</label></transition><transition><source ref="id63"/><target ref="id68"/><label kind="synchronisation" x="-392" y="-208">MoveBackwardS1False!</label><nail x="-400" y="-192"/></transition><transition><source ref="id64"/><target ref="id63"/><label kind="synchronisation" x="-176" y="-208">bfbStop!</label></transition><transition><source ref="id66"/><target ref="id64"/><label kind="guard" x="-80" y="-216">cl &gt;= 5</label></transition><transition><source ref="id66"/><target ref="id65"/><label kind="synchronisation" x="-88" y="-312">sSense[1]?</label></transition><transition><source ref="id67"/><target ref="id66"/><label kind="synchronisation" x="-200" y="-272">bfbBack!</label><label kind="assignment" x="-184" y="-256">cl = 0</label></transition><transition><source ref="id68"/><target ref="id67"/><label kind="synchronisation" x="-392" y="-272">MoveBackwardS1Call?</label></transition></template><template><name>MoveForwardS1</name><declaration>clock cl;</declaration><location id="id69" x="0" y="-304"></location><location id="id70" x="72" y="-256"></location><location id="id71" x="-8" y="-224"></location><location id="id72" x="-232" y="-320"></location><location id="id73" x="-232" y="-192"></location><location id="id74" x="-88" y="-192"></location><location id="id75" x="-88" y="-320"></location><location id="id76" x="-88" y="-256"><name x="-136" y="-288">Moving</name><label kind="invariant" x="-136" y="-248">cl &lt;= 5</label></location><location id="id77" x="-232" y="-256"></location><location id="id78" x="-400" y="-256"></location><init ref="id78"/><transition><source ref="id69"/><target ref="id76"/><label kind="synchronisation" x="-64" y="-272">bfbForward!</label><label kind="assignment" x="-40" y="-288">cl = 0</label></transition><transition><source ref="id70"/><target ref="id69"/><label kind="synchronisation" x="40" y="-296">emStop?</label></transition><transition><source ref="id71"/><target ref="id70"/><label kind="synchronisation" x="24" y="-240">bfbStop!</label></transition><transition><source ref="id76"/><target ref="id71"/><label kind="synchronisation" x="-64" y="-256">emStart?</label></transition><transition><source ref="id72"/><target ref="id78"/><label kind="synchronisation" x="-392" y="-336">MoveForwardS1True!</label><nail x="-400" y="-320"/></transition><transition><source ref="id75"/><target ref="id72"/><label kind="synchronisation" x="-176" y="-336">bfbStop!</label></transition><transition><source ref="id73"/><target ref="id78"/><label kind="synchronisation" x="-392" y="-208">MoveForwardS1False!</label><nail x="-400" y="-192"/></transition><transition><source ref="id74"/><target ref="id73"/><label kind="synchronisation" x="-176" y="-208">bfbStop!</label></transition><transition><source ref="id76"/><target ref="id74"/><label kind="guard" x="-80" y="-224">cl &gt;= 5</label></transition><transition><source ref="id76"/><target ref="id75"/><label kind="synchronisation" x="-88" y="-312">sSense[1]?</label></transition><transition><source ref="id77"/><target ref="id76"/><label kind="synchronisation" x="-208" y="-272">bfbForward!</label><label kind="assignment" x="-192" y="-256">cl = 0</label></transition><transition><source ref="id78"/><target ref="id77"/><label kind="synchronisation" x="-384" y="-272">MoveForwardS1Call?</label></transition></template><template><name>LoadWafer</name><declaration>clock cl;</declaration><location id="id79" x="40" y="-280"></location><location id="id80" x="120" y="-280"></location><location id="id81" x="192" y="-232"></location><location id="id82" x="120" y="-184"></location><location id="id83" x="32" y="-184"></location><location id="id84" x="-280" y="-168"></location><location id="id85" x="-176" y="-168"></location><location id="id86" x="-56" y="-168"></location><location id="id87" x="-280" y="-304"></location><location id="id88" x="-176" y="-304"></location><location id="id89" x="-56" y="-304"></location><location id="id90" x="-56" y="-232"><name x="-104" y="-264">Moving</name><label kind="invariant" x="-112" y="-224">cl &lt;= 10</label></location><location id="id91" x="-176" y="-232"></location><location id="id92" x="-280" y="-232"></location><location id="id93" x="-416" y="-232"></location><init ref="id93"/><transition><source ref="id80"/><target ref="id79"/><label kind="synchronisation" x="56" y="-296">bStart!</label></transition><transition><source ref="id79"/><target ref="id90"/><label kind="synchronisation" x="-24" y="-248">bfbForward!</label><label kind="assignment" x="0" y="-264">cl = 0</label></transition><transition><source ref="id81"/><target ref="id80"/><label kind="synchronisation" x="160" y="-272">emStop?</label></transition><transition><source ref="id82"/><target ref="id81"/><label kind="synchronisation" x="152" y="-208">bfbStop!</label></transition><transition><source ref="id83"/><target ref="id82"/><label kind="synchronisation" x="48" y="-200">bStop!</label></transition><transition><source ref="id90"/><target ref="id83"/><label kind="synchronisation" x="-16" y="-224">emStart?</label></transition><transition><source ref="id84"/><target ref="id93"/><label kind="synchronisation" x="-408" y="-184">LoadWaferFalse!</label><nail x="-416" y="-168"/></transition><transition><source ref="id85"/><target ref="id84"/><label kind="synchronisation" x="-248" y="-184">bStop!</label></transition><transition><source ref="id86"/><target ref="id85"/><label kind="synchronisation" x="-144" y="-184">bfbStop!</label></transition><transition><source ref="id90"/><target ref="id86"/><label kind="guard" x="-48" y="-200">cl &gt;= 10</label></transition><transition><source ref="id87"/><target ref="id93"/><label kind="synchronisation" x="-408" y="-320">LoadWaferTrue!</label><nail x="-416" y="-304"/></transition><transition><source ref="id88"/><target ref="id87"/><label kind="synchronisation" x="-248" y="-320">bStop!</label></transition><transition><source ref="id89"/><target ref="id88"/><label kind="synchronisation" x="-144" y="-320">bfbStop!</label></transition><transition><source ref="id90"/><target ref="id89"/><label kind="synchronisation" x="-56" y="-280">sSense[1]?</label></transition><transition><source ref="id91"/><target ref="id90"/><label kind="synchronisation" x="-160" y="-248">bfbForward!</label><label kind="assignment" x="-136" y="-232">cl = 0</label></transition><transition><source ref="id92"/><target ref="id91"/><label kind="synchronisation" x="-248" y="-248">bStart!</label></transition><transition><source ref="id93"/><target ref="id92"/><label kind="synchronisation" x="-400" y="-248">LoadWaferCall?</label></transition></template><template><name>OpenDoor1</name><declaration>int tries;</declaration><location id="id94" x="-168" y="-24"></location><location id="id95" x="-48" y="-160"><urgent/></location><location id="id96" x="-48" y="0"></location><location id="id97" x="-48" y="-88"></location><location id="id98" x="-168" y="-88"></location><location id="id99" x="-400" y="-160"></location><location id="id100" x="-272" y="-88"></location><location id="id101" x="-400" y="-88"></location><location id="id102" x="-536" y="-88"></location><init ref="id102"/><transition><source ref="id94"/><target ref="id98"/><label kind="synchronisation" x="-240" y="-56">emStop?</label><nail x="-192" y="-56"/></transition><transition><source ref="id98"/><target ref="id94"/><label kind="synchronisation" x="-144" y="-64">emStart?</label><nail x="-144" y="-56"/></transition><transition><source ref="id95"/><target ref="id100"/><label kind="guard" x="-232" y="-136">tries &lt;= 5</label></transition><transition><source ref="id95"/><target ref="id99"/><label kind="guard" x="-248" y="-176">tries &gt;= 5</label></transition><transition><source ref="id97"/><target ref="id95"/><label kind="synchronisation" x="-40" y="-144">sSense[3]?</label><label kind="assignment" x="-40" y="-128">tries = tries + 1</label></transition><transition><source ref="id96"/><target ref="id102"/><label kind="synchronisation" x="-352" y="-16">OpenDoor1True!</label><nail x="-536" y="0"/></transition><transition><source ref="id97"/><target ref="id96"/><label kind="synchronisation" x="-40" y="-72">sNoSense[3]?</label></transition><transition><source ref="id98"/><target ref="id97"/><label kind="synchronisation" x="-152" y="-104">dOpened[1]?</label></transition><transition><source ref="id100"/><target ref="id98"/><label kind="synchronisation" x="-248" y="-104">dOpen[1]!</label></transition><transition><source ref="id99"/><target ref="id102"/><label kind="synchronisation" x="-528" y="-176">OpenDoor1False!</label><nail x="-536" y="-160"/></transition><transition><source ref="id101"/><target ref="id99"/><label kind="synchronisation" x="-400" y="-136">sNoSense[4]?</label></transition><transition><source ref="id101"/><target ref="id100"/><label kind="synchronisation" x="-376" y="-104">sSense[4]?</label></transition><transition><source ref="id102"/><target ref="id101"/><label kind="synchronisation" x="-520" y="-104">OpenDoor1Call?</label><label kind="assignment" x="-496" y="-88">tries = 0</label></transition></template><template><name>OpenDoor2</name><declaration>int tries;</declaration><location id="id103" x="-168" y="-32"></location><location id="id104" x="-48" y="-160"><urgent/></location><location id="id105" x="-48" y="-8"></location><location id="id106" x="-48" y="-88"></location><location id="id107" x="-168" y="-88"></location><location id="id108" x="-400" y="-160"></location><location id="id109" x="-272" y="-88"></location><location id="id110" x="-400" y="-88"></location><location id="id111" x="-536" y="-88"></location><init ref="id111"/><transition><source ref="id103"/><target ref="id107"/><label kind="synchronisation" x="-240" y="-64">emStop?</label><nail x="-184" y="-64"/></transition><transition><source ref="id107"/><target ref="id103"/><label kind="synchronisation" x="-152" y="-64">emStart?</label><nail x="-152" y="-64"/></transition><transition><source ref="id104"/><target ref="id109"/><label kind="guard" x="-232" y="-136">tries &lt;= 5</label></transition><transition><source ref="id104"/><target ref="id108"/><label kind="guard" x="-248" y="-176">tries &gt;= 5</label></transition><transition><source ref="id106"/><target ref="id104"/><label kind="synchronisation" x="-40" y="-144">sSense[4]?</label><label kind="assignment" x="-40" y="-128">tries = tries + 1</label></transition><transition><source ref="id105"/><target ref="id111"/><label kind="synchronisation" x="-352" y="-24">OpenDoor2True!</label><nail x="-536" y="-8"/></transition><transition><source ref="id106"/><target ref="id105"/><label kind="synchronisation" x="-40" y="-72">sNoSense[4]?</label></transition><transition><source ref="id107"/><target ref="id106"/><label kind="synchronisation" x="-152" y="-104">dOpened[2]?</label></transition><transition><source ref="id109"/><target ref="id107"/><label kind="synchronisation" x="-248" y="-104">dOpen[2]!</label></transition><transition><source ref="id108"/><target ref="id111"/><label kind="synchronisation" x="-528" y="-176">OpenDoor2False!</label><nail x="-536" y="-160"/></transition><transition><source ref="id110"/><target ref="id108"/><label kind="synchronisation" x="-400" y="-136">sNoSense[3]?</label></transition><transition><source ref="id110"/><target ref="id109"/><label kind="synchronisation" x="-376" y="-104">sSense[3]?</label></transition><transition><source ref="id111"/><target ref="id110"/><label kind="synchronisation" x="-520" y="-104">OpenDoor2Call?</label><label kind="assignment" x="-496" y="-88">tries = 0</label></transition></template><template><name>CloseDoor2</name><declaration>int tries;</declaration><location id="id112" x="-152" y="-128"></location><location id="id113" x="-32" y="-104"></location><location id="id114" x="-32" y="-248"><urgent/></location><location id="id115" x="-32" y="-184"></location><location id="id116" x="-152" y="-184"></location><location id="id117" x="-280" y="-184"></location><location id="id118" x="-424" y="-184"></location><init ref="id118"/><transition><source ref="id112"/><target ref="id116"/><label kind="synchronisation" x="-224" y="-168">emStop?</label><nail x="-168" y="-160"/></transition><transition><source ref="id116"/><target ref="id112"/><label kind="synchronisation" x="-136" y="-168">emStart?</label><nail x="-136" y="-160"/></transition><transition><source ref="id114"/><target ref="id118"/><label kind="guard" x="-208" y="-264">tries &gt;= 5</label><label kind="synchronisation" x="-392" y="-264">CloseDoor2False!</label><nail x="-424" y="-248"/></transition><transition><source ref="id114"/><target ref="id117"/><label kind="guard" x="-216" y="-232">tries &lt;= 5</label></transition><transition><source ref="id113"/><target ref="id118"/><label kind="synchronisation" x="-288" y="-120">CloseDoor2True!</label><nail x="-424" y="-104"/></transition><transition><source ref="id115"/><target ref="id113"/><label kind="synchronisation" x="-32" y="-160">sSense[4]?</label></transition><transition><source ref="id115"/><target ref="id114"/><label kind="synchronisation" x="-32" y="-232">sNoSense[4]?</label><label kind="assignment" x="-32" y="-216">tries = tries + 1</label></transition><transition><source ref="id116"/><target ref="id115"/><label kind="synchronisation" x="-128" y="-200">dClosed[2]?</label></transition><transition><source ref="id117"/><target ref="id116"/><label kind="synchronisation" x="-248" y="-200">dClose[2]!</label></transition><transition><source ref="id118"/><target ref="id117"/><label kind="synchronisation" x="-408" y="-200">CloseDoor2Call?</label><label kind="assignment" x="-384" y="-184">tries = 0</label></transition></template><template><name>CloseDoor1</name><declaration>int tries;</declaration><location id="id119" x="-152" y="-136"></location><location id="id120" x="-32" y="-104"></location><location id="id121" x="-32" y="-248"><urgent/></location><location id="id122" x="-32" y="-184"></location><location id="id123" x="-152" y="-184"></location><location id="id124" x="-280" y="-184"></location><location id="id125" x="-424" y="-184"></location><init ref="id125"/><transition><source ref="id119"/><target ref="id123"/><label kind="synchronisation" x="-224" y="-160">emStop?</label><nail x="-168" y="-160"/></transition><transition><source ref="id123"/><target ref="id119"/><label kind="synchronisation" x="-136" y="-160">emStart?</label><nail x="-136" y="-160"/></transition><transition><source ref="id121"/><target ref="id125"/><label kind="guard" x="-208" y="-264">tries &gt;= 5</label><label kind="synchronisation" x="-392" y="-264">CloseDoor1False!</label><nail x="-424" y="-248"/></transition><transition><source ref="id121"/><target ref="id124"/><label kind="guard" x="-216" y="-232">tries &lt;= 5</label></transition><transition><source ref="id120"/><target ref="id125"/><label kind="synchronisation" x="-288" y="-120">CloseDoor1True!</label><nail x="-424" y="-104"/></transition><transition><source ref="id122"/><target ref="id120"/><label kind="synchronisation" x="-32" y="-160">sSense[3]?</label></transition><transition><source ref="id122"/><target ref="id121"/><label kind="synchronisation" x="-32" y="-232">sNoSense[3]?</label><label kind="assignment" x="-32" y="-216">tries = tries + 1</label></transition><transition><source ref="id123"/><target ref="id122"/><label kind="synchronisation" x="-128" y="-200">dClosed[1]?</label></transition><transition><source ref="id124"/><target ref="id123"/><label kind="synchronisation" x="-248" y="-200">dClose[1]!</label></transition><transition><source ref="id125"/><target ref="id124"/><label kind="synchronisation" x="-408" y="-200">CloseDoor1Call?</label><label kind="assignment" x="-384" y="-184">tries = 0</label></transition></template><template><name>Burn</name><declaration>clock cl;</declaration><location id="id126" x="-664" y="-248"></location><location id="id127" x="-576" y="-248"></location><location id="id128" x="-416" y="-144"></location><location id="id129" x="-416" y="-200"></location><location id="id130" x="-416" y="-264"></location><location id="id131" x="-416" y="-352"></location><location id="id132" x="-216" y="-352"></location><location id="id133" x="-216" y="-304"></location><location id="id134" x="-216" y="-248"></location><location id="id135" x="-216" y="-200"></location><location id="id136" x="-216" y="-152"></location><location id="id137" x="-136" y="-32"></location><location id="id138" x="-136" y="-96"></location><location id="id139" x="-216" y="-96"><label kind="invariant" x="-232" y="-88">cl &lt;= 2</label></location><location id="id140" x="-312" y="-96"></location><location id="id141" x="-416" y="-96"></location><init ref="id141"/><transition><source ref="id127"/><target ref="id126"/><label kind="synchronisation" x="-640" y="-264">crash!</label></transition><transition><source ref="id129"/><target ref="id127"/><label kind="synchronisation" x="-552" y="-216">OpenDoor1False?</label><nail x="-576" y="-200"/></transition><transition><source ref="id131"/><target ref="id127"/><label kind="synchronisation" x="-560" y="-368">CloseDoor2False?</label><nail x="-576" y="-352"/></transition><transition><source ref="id128"/><target ref="id141"/><label kind="synchronisation" x="-496" y="-136">BurnFalse!</label></transition><transition><source ref="id129"/><target ref="id128"/><label kind="synchronisation" x="-528" y="-184">OpenDoor1True?</label></transition><transition><source ref="id130"/><target ref="id129"/><label kind="synchronisation" x="-520" y="-240">OpenDoor1Call!</label></transition><transition><source ref="id131"/><target ref="id130"/><label kind="synchronisation" x="-528" y="-328">CloseDoor2True?</label></transition><transition><source ref="id132"/><target ref="id131"/><label kind="synchronisation" x="-368" y="-376">CloseDoor2Call!</label></transition><transition><source ref="id133"/><target ref="id132"/><label kind="synchronisation" x="-208" y="-336">MoveForwardTRet?</label></transition><transition><source ref="id134"/><target ref="id133"/><label kind="synchronisation" x="-208" y="-296">MoveForwardTCall!</label><label kind="assignment" x="-208" y="-280">arg[0] = 1</label></transition><transition><source ref="id135"/><target ref="id134"/><label kind="synchronisation" x="-216" y="-232">emStop?</label></transition><transition><source ref="id136"/><target ref="id135"/><label kind="synchronisation" x="-208" y="-184">lOff!</label></transition><transition><source ref="id139"/><target ref="id136"/><label kind="synchronisation" x="-216" y="-136">emStart?</label></transition><transition><source ref="id137"/><target ref="id141"/><label kind="synchronisation" x="-312" y="-48">BurnTrue!</label><nail x="-416" y="-32"/></transition><transition><source ref="id138"/><target ref="id137"/><label kind="synchronisation" x="-128" y="-72">lOff!</label></transition><transition><source ref="id139"/><target ref="id138"/><label kind="guard" x="-200" y="-112">cl &gt;= 2</label></transition><transition><source ref="id140"/><target ref="id139"/><label kind="synchronisation" x="-280" y="-112">lOn!</label><label kind="assignment" x="-288" y="-96">cl = 0</label></transition><transition><source ref="id141"/><target ref="id140"/><label kind="synchronisation" x="-400" y="-112">BurnCall?</label></transition></template><template><name>HandleFalloff</name><location id="id142" x="-280" y="-40"><name x="-290" y="-70">Crashed</name></location><location id="id143" x="-184" y="-40"></location><location id="id144" x="-376" y="24"></location><location id="id145" x="-240" y="24"></location><location id="id146" x="-112" y="24"></location><location id="id147" x="40" y="24"></location><location id="id148" x="40" y="-128"></location><location id="id149" x="-80" y="-128"></location><location id="id150" x="-376" y="-128"></location><init ref="id150"/><transition><source ref="id143"/><target ref="id142"/><label kind="synchronisation" x="-248" y="-56">crash!</label></transition><transition><source ref="id148"/><target ref="id143"/><label kind="synchronisation" x="-88" y="-104">lostfive?</label><nail x="0" y="-88"/><nail x="-152" y="-88"/></transition><transition><source ref="id147"/><target ref="id143"/><label kind="synchronisation" x="-128" y="-40">CloseDoor2False?</label><nail x="8" y="-40"/></transition><transition><source ref="id145"/><target ref="id143"/><label kind="synchronisation" x="-208" y="-16">OpenDoor1False?</label></transition><transition><source ref="id144"/><target ref="id150"/><label kind="synchronisation" x="-376" y="-96">HandleFalloffRet!</label></transition><transition><source ref="id145"/><target ref="id144"/><label kind="synchronisation" x="-360" y="8">OpenDoor1True?</label></transition><transition><source ref="id146"/><target ref="id145"/><label kind="synchronisation" x="-224" y="8">OpenDoor1Call!</label></transition><transition><source ref="id147"/><target ref="id146"/><label kind="synchronisation" x="-88" y="8">CloseDoor2True?</label></transition><transition><source ref="id148"/><target ref="id147"/><label kind="synchronisation" x="-64" y="-72">CloseDoor2Call!</label></transition><transition><source ref="id149"/><target ref="id148"/><label kind="synchronisation" x="-40" y="-144">fallOff!</label></transition><transition><source ref="id150"/><target ref="id149"/><label kind="synchronisation" x="-328" y="-144">HandleFalloffCall?</label></transition></template><template><name>ManageCrash</name><location id="id151" x="-296" y="-144"><name x="-328" y="-176">Crashed</name></location><location id="id152" x="-408" y="-144"><name x="-424" y="-176">Running</name></location><init ref="id152"/><transition><source ref="id152"/><target ref="id151"/><label kind="synchronisation" x="-376" y="-160">crash?</label></transition></template><template><name>Main</name><declaration>clock total;</declaration><location id="id153" x="-520" y="-504"><name x="-552" y="-536">Crashed2</name></location><location id="id154" x="-664" y="-504"></location><location id="id155" x="-664" y="-448"></location><location id="id156" x="-824" y="-448"></location><location id="id157" x="-424" y="-232"><name x="-464" y="-264">Crashed</name></location><location id="id158" x="-456" y="-24"><name x="-528" y="-56">HandlingFallOff</name></location><location id="id159" x="-672" y="-368"></location><location id="id160" x="-672" y="-312"><name x="-816" y="-320">WaferOutsideAirlock2</name></location><location id="id161" x="-672" y="-264"></location><location id="id162" x="-672" y="-216"><name x="-760" y="-224">Door1Open</name></location><location id="id163" x="-672" y="-168"></location><location id="id164" x="-672" y="-120"><name x="-776" y="-128">Door2Closed</name></location><location id="id165" x="-672" y="-72"></location><location id="id166" x="-672" y="-16"><name x="-784" y="-24">WaferInAirlock2</name></location><location id="id167" x="-672" y="40"></location><location id="id168" x="-672" y="104"><name x="-824" y="96">WaferAlmostInAirlock</name></location><location id="id169" x="-672" y="160"></location><location id="id170" x="-672" y="216"><name x="-776" y="200">BurningDone</name></location><location id="id171" x="-448" y="216"><name x="-458" y="186">Burning</name></location><location id="id172" x="-240" y="216"><name x="-224" y="200">WaferUnderlamp</name></location><location id="id173" x="-240" y="160"></location><location id="id174" x="-456" y="48"><name x="-464" y="56">LostWafer</name></location><location id="id175" x="-240" y="104"><name x="-224" y="96">WaferOutsideAirlock1</name></location><location id="id176" x="-240" y="48"></location><location id="id177" x="-240" y="0"><name x="-224" y="-16">Door2Open</name></location><location id="id178" x="-240" y="-56"></location><location id="id179" x="-424" y="-168"><name x="-512" y="-200">DoorJammed</name></location><location id="id180" x="-240" y="-112"><name x="-224" y="-120">Door1Closed</name></location><location id="id181" x="-240" y="-168"></location><location id="id182" x="-240" y="-224"><name x="-224" y="-232">WaferInAirlock1</name></location><location id="id183" x="-240" y="-280"></location><location id="id184" x="-240" y="-368"><name x="-224" y="-384">LoadedWafer</name></location><location id="id185" x="-384" y="-368"><name x="-392" y="-400">LoadingWafer</name></location><location id="id186" x="-520" y="-368"><name x="-528" y="-360">ReadyToLoadWafer</name></location><location id="id187" x="-520" y="-448"><name x="-504" y="-472">ProgramPaused</name></location><init ref="id156"/><transition><source ref="id154"/><target ref="id153"/><label kind="synchronisation" x="-608" y="-520">crash!</label></transition><transition><source ref="id155"/><target ref="id154"/><label kind="synchronisation" x="-784" y="-488">OpenDoor1False?</label></transition><transition><source ref="id155"/><target ref="id187"/><label kind="synchronisation" x="-648" y="-463">OpenDoor1True?</label></transition><transition><source ref="id156"/><target ref="id155"/><label kind="synchronisation" x="-800" y="-463">OpenDoor1Call!</label></transition><transition><source ref="id171"/><target ref="id186"/><label kind="synchronisation" x="-696" y="232">BurnFalse?</label><nail x="-520" y="248"/><nail x="-848" y="248"/><nail x="-848" y="-416"/><nail x="-624" y="-416"/></transition><transition><source ref="id179"/><target ref="id157"/><label kind="synchronisation" x="-464" y="-216">crash!</label></transition><transition><source ref="id158"/><target ref="id186"/><label kind="synchronisation" x="-584" y="-40">HandleFalloffRet?</label><nail x="-600" y="-24"/><nail x="-600" y="-288"/></transition><transition><source ref="id174"/><target ref="id158"/><label kind="synchronisation" x="-568" y="0">HandleFalloffCall!</label></transition><transition><source ref="id161"/><target ref="id174"/><label kind="synchronisation" x="-624" y="32">MoveBackwardS1False?</label><nail x="-624" y="-224"/><nail x="-624" y="48"/></transition><transition><source ref="id159"/><target ref="id186"/><label kind="synchronisation" x="-672" y="-384">MoveBackwardTRet?</label></transition><transition><source ref="id160"/><target ref="id159"/><label kind="synchronisation" x="-816" y="-352">MoveBackwardTCall!</label><label kind="assignment" x="-744" y="-336">arg[0] = 3</label></transition><transition><source ref="id161"/><target ref="id160"/><label kind="synchronisation" x="-832" y="-296">MoveBackwardS1True?</label></transition><transition><source ref="id162"/><target ref="id161"/><label kind="synchronisation" x="-824" y="-248">MoveBackwardS1Call!</label></transition><transition><source ref="id163"/><target ref="id179"/><label kind="synchronisation" x="-564" y="-183">OpenDoor1False?</label></transition><transition><source ref="id163"/><target ref="id162"/><label kind="synchronisation" x="-792" y="-200">OpenDoor1True?</label></transition><transition><source ref="id164"/><target ref="id163"/><label kind="synchronisation" x="-784" y="-152">OpenDoor1Call!</label></transition><transition><source ref="id165"/><target ref="id179"/><label kind="synchronisation" x="-568" y="-88">CloseDoor2False?</label><nail x="-448" y="-72"/></transition><transition><source ref="id165"/><target ref="id164"/><label kind="synchronisation" x="-792" y="-104">CloseDoor2True?</label></transition><transition><source ref="id166"/><target ref="id165"/><label kind="synchronisation" x="-784" y="-56">CloseDoor2Call!</label></transition><transition><source ref="id167"/><target ref="id166"/><label kind="synchronisation" x="-816" y="0">MoveBackwardTRet?</label></transition><transition><source ref="id168"/><target ref="id167"/><label kind="synchronisation" x="-808" y="56">MoveBackwardTCall!</label><label kind="assignment" x="-736" y="72">arg[0] = 2</label></transition><transition><source ref="id169"/><target ref="id174"/><label kind="synchronisation" x="-608" y="120">MoveBackwardS2False?</label></transition><transition><source ref="id169"/><target ref="id168"/><label kind="synchronisation" x="-824" y="120">MoveBackwardS2True?</label></transition><transition><source ref="id170"/><target ref="id169"/><label kind="synchronisation" x="-816" y="176">MoveBackwardS2Call!</label></transition><transition><source ref="id171"/><target ref="id170"/><label kind="synchronisation" x="-592" y="200">BurnTrue?</label></transition><transition><source ref="id172"/><target ref="id171"/><label kind="synchronisation" x="-368" y="200">BurnCall!</label></transition><transition><source ref="id173"/><target ref="id172"/><label kind="synchronisation" x="-368" y="176">MoveForwardTRet?</label></transition><transition><source ref="id175"/><target ref="id173"/><label kind="synchronisation" x="-368" y="112">MoveForwardTCall!</label><label kind="assignment" x="-304" y="128">arg[0] = 1</label></transition><transition><source ref="id176"/><target ref="id174"/><label kind="synchronisation" x="-416" y="32">MoveForwardS2False?</label></transition><transition><source ref="id176"/><target ref="id175"/><label kind="synchronisation" x="-392" y="64">MoveForwardS2True?</label></transition><transition><source ref="id177"/><target ref="id176"/><label kind="synchronisation" x="-384" y="8">MoveForwardS2Call!</label></transition><transition><source ref="id178"/><target ref="id179"/><label kind="synchronisation" x="-368" y="-72">OpenDoor2False?</label><nail x="-376" y="-56"/></transition><transition><source ref="id178"/><target ref="id177"/><label kind="synchronisation" x="-360" y="-40">OpenDoor2True?</label></transition><transition><source ref="id180"/><target ref="id178"/><label kind="synchronisation" x="-352" y="-96">OpenDoor2Call!</label></transition><transition><source ref="id181"/><target ref="id179"/><label kind="synchronisation" x="-376" y="-184">CloseDoor1False?</label></transition><transition><source ref="id181"/><target ref="id180"/><label kind="synchronisation" x="-360" y="-152">CloseDoor1True?</label></transition><transition><source ref="id182"/><target ref="id181"/><label kind="synchronisation" x="-352" y="-208">CloseDoor1Call!</label></transition><transition><source ref="id183"/><target ref="id182"/><label kind="synchronisation" x="-368" y="-264">MoveForwardTRet?</label></transition><transition><source ref="id184"/><target ref="id183"/><label kind="synchronisation" x="-368" y="-328">MoveForwardTCall!</label><label kind="assignment" x="-304" y="-344">arg[0] = 2</label></transition><transition><source ref="id185"/><target ref="id184"/><label kind="synchronisation" x="-368" y="-384">LoadWaferTrue?</label><label kind="assignment" x="-352" y="-368">total = 0</label></transition><transition><source ref="id185"/><target ref="id187"/><label kind="synchronisation" x="-472" y="-432">LoadWaferFalse?</label></transition><transition><source ref="id186"/><target ref="id185"/><label kind="synchronisation" x="-504" y="-384">LoadWaferCall!</label></transition><transition><source ref="id187"/><target ref="id186"/><label kind="synchronisation" x="-592" y="-432">startPress?</label><label kind="assignment" x="-576" y="-416">total = 0</label></transition></template><template><name>EMButton</name><declaration>clock cl;</declaration><location id="id188" x="-312" y="-104"></location><location id="id189" x="-184" y="-136"><name x="-168" y="-144">Emergency</name></location><location id="id190" x="-312" y="-160"><name x="-392" y="-192">NotEmergency</name></location><init ref="id190"/><transition><source ref="id188"/><target ref="id189"/><label kind="synchronisation" x="-272" y="-120">emStart!</label></transition><transition><source ref="id190"/><target ref="id188"/><label kind="guard" x="-352" y="-144">cl &gt; 0</label></transition><transition><source ref="id189"/><target ref="id190"/><label kind="synchronisation" x="-272" y="-176">emStop!</label><label kind="assignment" x="-264" y="-192">cl = 0</label></transition></template><template><name>StartButton</name><location id="id191" x="-424" y="-208"><name x="-472" y="-240">Released</name></location><init ref="id191"/><transition><source ref="id191"/><target ref="id191"/><label kind="synchronisation" x="-384" y="-216">startPress!</label><nail x="-384" y="-240"/><nail x="-384" y="-176"/></transition></template><system>// Place template instantiations here.
// We have ...

// two doors making up an airlock
door1 = Door(1);
door2 = Door(2);

// two pressure sensors which verify the doors are really closed
press1 = Sensor(3);
press2 = Sensor(4);

// one lamp for burning the wafer
lamp = Lamp();

// two photosensors
photo1 = Sensor(1);
photo2 = Sensor(2);

// two conveyor belts, one which only goes forward ...
conveyor1 = Conveyor();
// ... and one which goes in both directions
conveyor2 = ConveyorBF();

// some buttons for special user input
emergency = EMButton();
ready = StartButton();

// some means of indicating how many wafers have fallen off the belt
fallOff1 = FallOff();

// some programs to control everything
movebackwardt = MoveBackwardT();
moveforwardt = MoveForwardT();
movebackwards1 = MoveBackwardS1();
moveforwards1 = MoveForwardS1();
movebackwards2 = MoveBackwardS2();
moveforwards2 = MoveForwardS2();
loadwafer = LoadWafer();
opendoor1 = OpenDoor1();
opendoor2 = OpenDoor2();
closedoor1 = CloseDoor1();
closedoor2 = CloseDoor2();
burn = Burn();
handlefalloff = HandleFalloff();
managecrash = ManageCrash();
main = Main();

// List one or more processes to be composed into a system.
system	door1, door2, press1, press2,
	lamp,
	photo1, photo2,
	conveyor1, conveyor2,
	emergency, ready, fallOff1,
	movebackwardt, moveforwardt,
	movebackwards1, moveforwards1, movebackwards2, moveforwards2,
	loadwafer,
	opendoor1, opendoor2, closedoor1, closedoor2,
	burn,
	handlefalloff,
	managecrash,
	main;</system></nta>